import Credentials from 'next-auth/providers/credentials';
import { getRoleByEmail } from './team';
export const authOptions={providers:[Credentials({name:'Credentials',credentials:{email:{label:'Email',type:'text'},password:{label:'Password',type:'password'}},async authorize(c){const{email,password}=c||{}; if(!email||!password) return null; return {id:'u',name:'User',email};}})],session:{strategy:'jwt'},callbacks:{async jwt({token,user}){if(user?.email){token.role=await getRoleByEmail(user.email)||'member';} return token;},async session({session,token}){if(session?.user) session.user.role=token.role||'member'; return session;}}};
