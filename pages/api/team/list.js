import { getServerSession } from 'next-auth/next'; import { authOptions } from '../../../lib/auth'; import { listMembers } from '../../../lib/team'; export default async function h(req,res){const s=await getServerSession(req,res,authOptions); if(!s) return res.status(401).json({}); if(!['admin','analyst','member'].includes(s.user.role||'member')) return res.status(403).json({}); const m=await listMembers(); res.status(200).json({ok:true,members:m});}
