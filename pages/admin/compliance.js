import { getServerSession } from 'next-auth/next'; import { authOptions } from '../../lib/auth'; import Link from 'next/link'; export default function Page({user}){return (<main style={{padding:24}}><h1>Compliance (analyst+)</h1><p>User: {user?.email} Â· role {user?.role}</p><p><Link href='/admin'>Back</Link></p></main>)} export async function getServerSideProps(ctx){const s=await getServerSession(ctx.req,ctx.res,authOptions); if(!s) return {redirect:{destination:'/login',permanent:false}}; if(!['admin','analyst'].includes(s.user.role||'member')) return {redirect:{destination:'/admin',permanent:false}}; return {props:{user:s.user}}}
