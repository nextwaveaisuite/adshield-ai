import { getServerSession } from 'next-auth/next'; import { authOptions } from '../../lib/auth'; import Link from 'next/link'; export default function Page(){return (<main style={{padding:24}}><h1>Usage (admin)</h1><p>Logs appear here.</p><p><Link href='/admin'>Back</Link></p></main>)} export async function getServerSideProps(ctx){const s=await getServerSession(ctx.req,ctx.res,authOptions); if(!s) return {redirect:{destination:'/login',permanent:false}}; if((s.user.role||'member')!=='admin') return {redirect:{destination:'/admin',permanent:false}}; return {props:{}}}
